import{r as h,d as D,i as L,t as ue,c as ce,a as d,w as V,o as ee,T as F,b as B,v as O,p as C,e as _e,g as de,f as Le,h as fe,j as $e,k as ne,l as se,u as we,m as Se,F as Ne}from"./index-e90bdf55.js";import"./clipboard-c98c29d5.js";import Ee from"./IndexF-732f2852.js";var Ce=Object.defineProperty,Ie=(e,l,t)=>l in e?Ce(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Me=(e,l,t)=>(Ie(e,typeof l!="symbol"?l+"":l,t),t);function j(e,l,t){let n=e;return l&&(n+=`__${l}`),t&&(n+=`--${t}`),n}function I(e,l=!1){const t=l?`.devui-${e}`:`devui-${e}`;return{b:()=>j(t),e:u=>u?j(t,u):"",m:u=>u?j(t,"",u):"",em:(u,p)=>u&&p?j(t,u,p):""}}const me=[];let Q=[];const Z=h(24),H=I("menu"),Pe=I("submenu"),G=H.b(),ve=`${H.b()}-item-horizontal-wrapper`,pe=`${H.b()}-item-select`,he=`${H.b()}-active-parent`;function xe(e){Z.value=e}function ze(e){me.push(e)}function Ae(){Q=[],me.forEach(t=>{Q.push(t.el.parentElement)});const e=[...Q],l=t=>{var n;return(n=/layer_(\d*)/gim.exec(t))==null?void 0:n[1]};for(;e.length;){const t=e.shift();if(t!=null&&t.classList.contains(G)){const n=t.children;e.unshift(...Array.from(n));continue}else{if(t.tagName==="DIV")if(t.classList.contains(`${H.b()}-item-vertical-wrapper`)||t.classList.contains(`${Pe.b()}-menu-item-vertical-wrapper`)){const n=t.parentElement;if(e.unshift(...Array.from(t.children)),n!=null&&n.classList.contains(G))t.classList.add("layer_1");else{let s=l((n==null?void 0:n.classList.value)||"");s=Number(s),t.classList.add(`layer_${s}`)}}else{const n=t.parentElement;let s=l((n==null?void 0:n.classList.value)||"");s=Number(s),t.classList.add(`layer_${s}`),t.style.paddingLeft=`${(s===2?1:s-1)*Z.value}px`}if(t.tagName==="UL"){const n=t.parentElement,s=t.children;for(let u=0;u<s.length;u++)e.unshift(s[u]);const a=(n==null?void 0:n.classList.value)||"";let c=l(a);n!=null&&n.classList.contains(G)?(c=1,t.classList.add("layer_2")):(t.classList.add(`layer_${Number(c)+1}`),c=Number(c)+1)}if(t.tagName==="LI"){const n=t.parentElement,s=(n==null?void 0:n.classList.value)||"";let a=l(s);l(s),a=Number(a),t.style.padding=`0 ${a*Z.value}px`}}}}function ke(e){var l;const t=e;let n=null;for(let s=0;s<t.length;s++){const a=t[s];(l=a==null?void 0:a.classList)!=null&&l.contains(`${H.b()}-horizontal`)&&(n=a)}return n}function Be(e,l){let t=l.target,n=[];const s=ke(l.composedPath());for(n=[...Array.from(s.children)],t.tagName==="SPAN"&&(t=t.parentElement);n.length;){const a=n.shift();if((a==null?void 0:a.tagName)==="UL"||a!=null&&a.classList.contains(ve)){const c=a==null?void 0:a.children;n.unshift(...Array.from(c))}a!==t&&(a==null||a.classList.remove(pe),a==null||a.classList.remove(he))}}function Oe(e,l){const t=[],n=l.path||l.composedPath&&l.composedPath();for(let s=0;s<n.length;s++){const a=n[s];if(!a.classList.contains(G))t.push(...Array.from(a.children));else{t.push(...Array.from(a.children));break}}for(;t.length;){const s=t.shift();((s==null?void 0:s.tagName)==="UL"||s!=null&&s.classList.contains(ve))&&t.push(...Array.from(s==null?void 0:s.children)),s!==e&&((s==null?void 0:s.tagName)==="DIV"&&t.unshift(...Array.from(s==null?void 0:s.children)),s==null||s.classList.remove(pe),s==null||s.classList.remove(he))}}function ge(e,l,t=!1){t?Be(e,l):Oe(e,l)}function Te(e){var l;const t=/layer_(\d{1,})/gim,n=e.className;return(l=t.exec(n))==null?void 0:l[1]}const Re={disabled:{type:Boolean,default:!1},href:{type:String,default:""},route:{type:[String,Object]}},ae=I("menu");function oe(e,l,t,n){const s=h(!1);return t?e.includes(l)?s.value=!0:s.value=!1:e[0]===l&&!n.value?s.value=!0:s.value=!1,s.value}function De(e){var l,t;let n=e.parentElement;for(;!n.classList.contains(ae.b());)((l=n.firstElementChild)==null?void 0:l.tagName)==="DIV"&&((t=n==null?void 0:n.firstElementChild)==null||t.classList.add(`${ae.b()}-active-parent`)),n=n.parentElement;return n}function He(e,l,t,n){if(t&&l){const s=e.route||n,a=l.push(s).then(c=>c);return{route:s,routerResult:a}}}const X=I("menu");function be(e){const l=e.composedPath();for(let t=0;t<l.length;t++){const n=l[t];if(n.classList.contains(`${X.b()}-horizontal`))break;if(n.classList.contains(`${X.b()}-item-horizontal-wrapper`))continue;n.tagName!=="SPAN"&&n.classList.add(`${X.b()}-item-select`)}}const k=I("menu"),U=`${k.b()}-item-select`,Ke=`${k.b()}-item-disabled`;var Ue=D({name:"DMenuItem",props:Re,setup(e,l){var t,n;const s=de(),a=String(s==null?void 0:s.vnode.key),c=L("menuStore"),u=L("mode"),p=L("multiple"),$=L("defaultIndent"),M=L("isCollapsed"),x=L("defaultSelectKey"),{disabled:w}=ue(e),_=h(oe(x.value,a,p,w)),z=h(!0),N=L("rootMenuEmit"),E=L("useRouter"),S=s==null?void 0:s.appContext.config.globalProperties.$router,g=ce(()=>({[`${k.b()}-item`]:!0,[`${k.b()}-item-isCollapsed`]:M.value,[U]:_.value,[Ke]:w.value}));c.on("menuItem:clear:select",()=>{_.value=!1});const b=o=>{var i;o.stopPropagation();const v=o.currentTarget;let r;if(e.disabled&&o.preventDefault(),!e.disabled){if(!p)c.emit("menuItem:clear:select"),ge(v,o,u.value==="horizontal"),u.value==="horizontal"&&be(o),_.value=!0,r=He(e,S,E.value,a);else if(v.classList.contains(U)){N("deselect",{type:"deselect",key:a,el:v,e:o}),_.value=!1;return}else _.value=!0,v.classList.add(U);r===void 0?N("select",{type:"select",key:a,el:v,e:o}):N("select",{type:"select",key:a,el:v,e:o,route:r})}if(u.value==="vertical"){const y=o.currentTarget;De(y)}if(u.value==="horizontal"){const y=(i=v.parentElement)==null?void 0:i.parentElement;y==null||y.classList.add(`${k.b()}-active-parent`)}},f=d("span",{class:`${k.b()}-icon`},[(n=(t=l.slots).icon)==null?void 0:n.call(t)]),m=h(null);return V(w,()=>{p||(g.value[U]=!1)}),V(()=>[...x.value],o=>{_.value=oe(o,a,p,w),g.value[U]=_.value}),ee(()=>{var o,i;let v="";const r=m.value;u.value==="vertical"&&((i=(o=r.parentElement)==null?void 0:o.parentElement)!=null&&i.classList.contains(k.b())?(z.value=!0,z.value&&(r.style.paddingRight="",r.style.paddingLeft=`${$}px`),V(M,y=>{y?(r.style.padding!=="0"&&(v=r.style.padding),setTimeout(()=>{r.style.padding="0",r.style.width="",r.style.textAlign="center"},300),r.style.display="block"):(r.style.padding=`${v}`,r.style.textAlign="",r.style.display="flex")})):z.value=!1)}),()=>u.value==="vertical"?d("div",{class:`${k.b()}-item-vertical-wrapper`},[d("li",{class:g.value,onClick:b,ref:m},[l.slots.icon!==void 0&&f,e.href===""?d(F,{name:"fade"},{default:()=>{var o,i;return[B(d("span",null,[(i=(o=l.slots).default)==null?void 0:i.call(o)]),[[O,!M.value]])]}}):d("a",{href:e.href},[d(F,{name:"fade"},{default:()=>{var o,i;return[(i=(o=l.slots).default)==null?void 0:i.call(o)]}})])])]):d("li",{class:g.value,onClick:b,ref:m},[l.slots.icon!==void 0&&f,e.href===""?d(F,{name:"fade"},{default:()=>{var o,i;return[B(d("span",null,[(i=(o=l.slots).default)==null?void 0:i.call(o)]),[[O,!M.value]])]}}):d("a",{href:e.href},[d(F,{name:"fade"},{default:()=>{var o,i;return[(i=(o=l.slots).default)==null?void 0:i.call(o)]}})])])}});function ye(e=8){const l="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<e;n++)t+=l[parseInt((Math.random()*l.length).toString())];return t}function ie(e){for(;e&&e.tagName!=="LI"&&e.tagName!=="UL";)e=e.parentElement;return e}const re="0.3s height ease-in-out, 0.3s padding-top ease-in-out, 0.3s padding-bottom ease-in-out",T={"before-enter"(e){e.style.transition=re,e.setAttribute("data-oldPadding",e.style.padding),e.setAttribute("data-oldMargin",e.style.margin),e.style.height="0",e.style.padding="0",e.style.margin="0"},enter(e){e.dataset.oldOverflow=e.style.overflow,e.scrollHeight!==0?e.style.height=e.scrollHeight+"px":e.style.height="",e.style.padding=e.getAttribute("data-oldPadding"),e.style.margin=e.getAttribute("data-oldMargin"),e.style.overflow="hidden"},"after-enter"(e){e.style.transition="",e.style.transition="",e.style.height="",e.style.overflow=e.getAttribute("data-overflow")},"before-leave"(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave(e){e.scrollHeight!==0&&(e.style.transition=re,e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0")},"after-leave"(e){e.style.transition="",e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};var Fe=D({name:"DMenuTransition",setup(e,l){return()=>d(F,{onBeforeEnter:t=>T["before-enter"](t),onBeforeLeave:t=>T["before-leave"](t),onEnter:t=>T.enter(t),onAfterEnter:t=>T["after-enter"](t),onLeave:t=>T.leave(t),onAfterLeave:t=>T["after-leave"](t)},{default:()=>{var t,n;return[(n=(t=l.slots).default)==null?void 0:n.call(t)]}})}});const Ve={title:{type:String,default:""},disabled:{type:Boolean,default:!1}},J=I("menu"),je=I("submenu"),W=`${J.b()}-item-horizontal-wrapper-hidden`,q=`${J.b()}-item-horizontal-wrapper-show`;function R(e,l,t){const n=l.currentTarget,s=n.parentElement,a=t.children;if(t.style.padding="0 20px !important",e==="mouseenter"){if((s==null?void 0:s.tagName)==="DIV"){t.classList.add(`${J.b()}-item-horizontal-wrapper-level`);const{width:c}=n.getClientRects()[0];t.style.top="0px",t.style.left=`${c}px`}else t.style.top="26px",t.style.left="0px";t.classList.remove(W),t.classList.add(q);for(let c=0;c<a.length;c++){const u=a[c];if(u.tagName==="UL"&&u.classList.contains(je.b())){const p=u.getElementsByClassName(`${J.b()}-item-horizontal-wrapper`)[0];u.addEventListener("mouseenter",$=>{$.stopPropagation(),R("mouseenter",$,p),p.classList.remove(W),p.classList.add(q)}),u.addEventListener("mouseleave",$=>{$.stopPropagation(),R("mouseleave",$,p),p.classList.remove(q),p.classList.add(W)})}}}e==="mouseleave"&&(t.classList.remove(q),t.classList.add(W))}const Y=I("menu"),We=I("submenu"),A=We.b();var qe=D({name:"DSubMenu",props:Ve,setup(e,l){const t=h(!0),{vnode:{key:n}}=de();let s=String(n);const a=L("openKeys"),c=h(a.value.includes(s)),u=L("defaultIndent"),p=L("isCollapsed"),$=L("mode"),M=h(null),x=L("rootMenuEmit"),w=$.value==="horizontal";s==="null"&&(console.warn("[devui][menu]: Key can not be null"),s=`randomKey-${ye(16)}`);const _=f=>{f.stopPropagation();const m=ie(f.target);if(!(m.classList.contains(A)&&w)&&(w&&(ge(m,f,!0),be(f)),!e.disabled&&$.value!=="horizontal")){const o=ie(f.target),i=a.value.indexOf(s);i>=0&&o.tagName==="UL"?a.value.splice(i,1):o.tagName==="UL"&&a.value.push(s),c.value=a.value.indexOf(s)>=0,x("submenu-change",{type:"submenu-change",state:c.value,key:s,el:m})}},z=h(null);let N;const E=h(null),S=h(null);let g="";const b=h("");return Le(()=>{N=z.value,ze({el:E.value})},{flush:"post"}),V(()=>a,f=>{f.value.includes(s)?c.value=!0:c.value=!1},{deep:!0}),ee(()=>{var f;const m=S.value,o=E.value;Ae(),b.value=`layer_${(f=Array.from(o.classList).at(-1))==null?void 0:f.replace("layer_","")}`,w&&!e.disabled&&(E.value.addEventListener("mouseenter",i=>{i.stopPropagation(),R("mouseenter",i,N)}),E.value.addEventListener("mouseleave",i=>{i.stopPropagation(),R("mouseleave",i,N)})),V(p,i=>{const v=Number(Te(o));Number.isNaN(v)||v>2&&(t.value=!p.value),i?(m.style.padding!=="0"&&(g=m.style.padding),setTimeout(()=>{m.style.padding="0",m.style.width="",m.style.textAlign="center"},300),m.style.display="block"):(m.style.padding=`${g}`,m.style.textAlign="",m.style.display="flex")})}),()=>{var f,m,o,i;return B(d("ul",{onClick:_,class:[A,b.value,e.disabled&&`${A}-disabled`],ref:E},[d("div",{class:[`${A}-title`],style:`padding: 0 ${u}px`,ref:S},[d("span",{class:`${Y.b()}-icon`},[(m=(f=l.slots)==null?void 0:f.icon)==null?void 0:m.call(f)]),B(d("span",{class:`${A}-title-content`},[e.title]),[[O,!p.value]]),B(d("i",{class:{"icon icon-chevron-up":b.value!==`layer_${A}`,"icon icon-chevron-right":b.value===`layer_${A}`,"is-opened":c.value}},null),[[O,!p.value&&n!=="overflowContainer"]])]),w?B(d("div",{class:`${Y.b()}-item-horizontal-wrapper ${Y.b()}-item-horizontal-wrapper-hidden`,ref:z},[(i=(o=l.slots).default)==null?void 0:i.call(o)]),[[O,!e.disabled]]):d(Fe,null,{default:()=>{var v,r;return[B(d("div",{class:[`${A}-menu-item-vertical-wrapper`],ref:M},[(r=(v=l.slots).default)==null?void 0:r.call(v)]),[[O,c.value]])]}})]),[[O,t.value]])}}});const Ge={width:{type:String,default:""},collapsed:{type:Boolean,default:!1},collapsedIndent:{type:Number,default:24},indentSize:{type:Number,default:24},multiple:{type:Boolean,default:!1},openKeys:{type:Array,default:[]},defaultSelectKeys:{type:Array,default:[]},mode:{type:String,default:"vertical"},router:{type:Boolean,default:!1},disableOverflowStyle:{type:Boolean,default:!1}},P={};class Je{constructor(l){Me(this,"rootMenuName"),this.rootMenuName=l}on(l,t){var n;(n=P==null?void 0:P[this.rootMenuName])!=null&&n[l]||Reflect.set(P[this.rootMenuName],l,[]),P[this.rootMenuName][l].push(t)}emit(l,...t){P[this.rootMenuName][l].forEach(n=>n(...t))}off(l,t){const n=P[this.rootMenuName][l].indexOf(t);n>=0&&P[this.rootMenuName][l].splice(n,1)}}function Qe(e){return P[e]||Reflect.set(P,e,{}),new Je(e)}var Xe=D({name:"DMenu",props:Ge,emits:["select","deselect","submenu-change"],setup(e,l){const t=I("menu"),{openKeys:n,mode:s,collapsed:a,defaultSelectKeys:c,router:u}=ue(e),p=ye(16),$=Qe(p);C("menuStore",$),C("isCollapsed",a),C("defaultIndent",e.indentSize),C("multiple",e.multiple),C("openKeys",n),C("defaultSelectKey",c),C("mode",s),C("collapsedIndent",e.collapsedIndent),C("rootMenuEmit",l.emit),C("useRouter",u),xe(e.indentSize);const M=h(null),x=h(0),w=h(null),_=`${t.b()}-item-select`,z=ce(()=>({[`${t.b()}`]:!0,[`${t.b()}-vertical`]:s.value==="vertical",[`${t.b()}-horizontal`]:s.value==="horizontal",[`${t.b()}-collapsed`]:a.value})),N=_e({[_]:!1,[`${t.b()}-overflow-container`]:!0}),E=S=>{const g=Array.from(S.children);for(const b of g)if(b.classList.contains(_)){N[_]=!0;break}else N[_]=!1};return ee(()=>{var S;if(e.mode==="horizontal"){let g=!1;const b=(S=w.value)==null?void 0:S.$el,f=M.value,m=f.children,o=b.children[1],i=new IntersectionObserver(v=>{v.forEach(r=>{if(!r.isIntersecting&&!e.disableOverflowStyle){const y=r.target.cloneNode(!0);r.target.classList.contains(`${t.b()}-overflow-container`)?g&&r.target.previousElementSibling&&o.children.length?f.appendChild(r.target.previousElementSibling):g=!0:(x.value+=1,r.target.style.visibility="hidden",b.nextSibling?f.insertBefore(r.target,b.nextSibling):f.appendChild(r.target),o.appendChild(y),E(o))}else if(!r.target.classList.contains(`${t.b()}-overflow-container`)&&r.target.style.visibility==="hidden"){i.unobserve(r.target),f.insertBefore(r.target,b),r.target.style.visibility="";const y=b.previousElementSibling;if(y&&r.boundingClientRect.width%r.target.getBoundingClientRect().width===0&&i.observe(y),y!=null&&y.classList.contains("devui-submenu")){const te=y,le=y.children[1];te.addEventListener("mouseenter",K=>{K.stopPropagation(),R("mouseenter",K,le)}),te.addEventListener("mouseleave",K=>{K.stopPropagation(),R("mouseleave",K,le)})}x.value-=1,i.observe(r.target),o.lastChild&&o.removeChild(o.lastChild),E(o)}})},{root:f,threshold:1,rootMargin:"8px"});for(let v=0;v<m.length;v++)i.observe(m[v])}}),()=>{var S,g;return d("ul",{ref:M,class:z.value,style:[e.collapsed?`width:${e.collapsedIndent*2}px`:`width: ${e.width}`]},[(g=(S=l.slots).default)==null?void 0:g.call(S),B(d(qe,{ref:w,key:"overflowContainer",title:"...",class:N},null),[[O,x.value>0&&s.value==="horizontal"&&!e.disableOverflowStyle]])])}}});const Ye=D({__name:"MenuFirst",setup(e){let l=h(480);return(t,n)=>{const s=Ue,a=Xe;return fe(),$e(a,{mode:"horizontal","default-select-keys":["home"],style:{"margin-bottom":"120px"},width:we(l)+"px"},{default:ne(()=>[se(" 首页 "),d(s,{key:"person"},{default:ne(()=>[se("个人")]),_:1})]),_:1},8,["width"])}}}),nt=D({__name:"Index",setup(e){return(l,t)=>(fe(),Se(Ne,null,[d(Ye),d(Ee)],64))}});export{nt as default};
